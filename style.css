*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body{
  cursor: default;
  font-family:'Poppins',sans-serif;
  height:100vh;
  overflow:hidden;
  background:#0f0c29;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  transition:2s;
}

body.cinematic{
  background:radial-gradient(circle at center,#ff4da6,#1a002e);
}


.bg-parallax{
  position:fixed;
  width:120%;
  height:120%;
  background:
    radial-gradient(circle at 30% 30%,#ff8ad6,transparent),
    radial-gradient(circle at 70% 70%,#ff4da6,transparent);
  animation:moveBg 18s infinite alternate ease-in-out;
  z-index:-3;
}

@keyframes moveBg{
  0%{transform:translate(0,0);}
  100%{transform:translate(-40px,-20px);}
}

.light-overlay{
  position:fixed;
  width:100%;
  height:100%;
  background:radial-gradient(circle,rgba(255,255,255,0.08),transparent);
  animation:lightMove 8s infinite alternate;
  z-index:-2;
}

@keyframes lightMove{
  0%{transform:translateX(-30px);}
  100%{transform:translateX(30px);}
}

.sakura-container{
  position:fixed;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:-1;
}

.sakura{
  position:absolute;
  width:22px;
  animation:fall linear forwards;
}

@keyframes fall{
  0%{transform:translateY(-10vh) rotate(0deg);}
  100%{transform:translateY(110vh) rotate(360deg);}
}

.wrapper{
  position:relative;
  text-align:center;
}

.envelope{
  width:320px;
  height:220px;
  position:relative;
  cursor:pointer;
  transition:1s;
}

.envelope-body{
  width:100%;
  height:100%;
  background:linear-gradient(145deg,#ff4da6,#ff85c2);
  border-radius:18px;
  box-shadow:0 20px 50px rgba(0,0,0,0.4);
}

.envelope-flap{
  position:absolute;
  width:100%;
  height:110px;
  background:#ff6fa5;
  top:0;
  border-radius:18px 18px 0 0;
  transform-origin:top;
  transition:2s cubic-bezier(.2,.8,.2,1);
}

.seal{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:36px;
}

.envelope-wrapper.open .envelope-flap{
  transform:rotateX(180deg);
}

.letter{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(0);
  width:90%;
  max-width:750px; 
  min-width:320px;  
  padding:60px 50px;
  border-radius:30px;
  backdrop-filter:blur(25px);
  background:rgba(255,255,255,0.12);
  box-shadow:0 0 50px rgba(255,77,166,0.4);
  transition:1.3s cubic-bezier(.2,.8,.2,1);
}


.envelope-wrapper.open ~ .letter{
  transform:translate(-50%,-50%) scale(1);
}

.title{
  font-family:'Great Vibes',cursive;
  font-size:46px;
  text-shadow:0 0 12px #ff4da6;
}

.text-box{
  max-width:600px;
  margin:30px auto 0 auto;
  font-size:18px;
  line-height:1.9;
  letter-spacing:0.5px;
  font-weight:300;
  text-align:center;
}


.text-box p{
  text-shadow: 0 0 6px rgba(0,0,0,0.4);
}

#romanticPart{
  transition: opacity 1s ease, transform 1s ease;
}


.cursor{
  display:inline-block;
  width:3px;
  height:22px;
  background:#ff4da6;
  margin-left:5px;
  animation:blink 0.8s infinite;
}

@keyframes blink{
  0%,50%,100%{opacity:1;}
  25%,75%{opacity:0;}
}

.question{
  margin-top:30px;
  transition:1s;
}

.hidden{
  display:none;
}


.buttons{
  margin-top:25px;
  display:flex;
  justify-content:center;
  gap:20px;
}

button{
  padding:10px 28px;
  border:none;
  border-radius:30px;
  font-size:15px;
  cursor:pointer;
  transition:0.3s;
}

#yesBtn{
  background:#ff4da6;
  color:white;
  box-shadow:0 0 15px #ff4da6;
}

#yesBtn:hover{
  transform:scale(1.1);
}

#noBtn{
  position:relative;
  background:white;
  color:#ff4da6;
  transition: all 0.25s ease;
}

.surprise{
  position:fixed;
  inset:0;
  background:radial-gradient(circle at center,#ff4da6,#1a002e);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  transform:translateY(100%);
  transition:1.2s cubic-bezier(.77,0,.18,1);
  z-index:999;
}

.surprise.active{
  transform:translateY(0);
}

.big-text{
  font-family:'Great Vibes',cursive;
  font-size:70px;
  text-shadow:0 0 20px #fff,0 0 40px #ff4da6;
}

.sub-text{
  font-size:22px;
  margin-top:20px;
}

.confetti{
  position:absolute;
  width:8px;
  height:14px;
  background:#fff;
  animation:confettiFall linear forwards;
}

@keyframes confettiFall{
  0%{transform:translateY(-10vh) rotate(0deg);}
  100%{transform:translateY(110vh) rotate(360deg);}
}

@media(max-width:600px){
  .title{font-size:30px;}
  .letter{padding:30px;}
  .envelope{width:250px;height:170px;}
}

.cursor-dot{
  position: fixed;
  width: 8px;
  height: 8px;
  background: #ff4da6;
  border-radius: 50%;
  pointer-events: none;
  z-index: 2000;
  transform: translate(-50%, -50%);
}

.cursor-glow{
  position: fixed;
  width: 35px;
  height: 35px;
  background: radial-gradient(circle, rgba(255,77,166,0.6) 0%, rgba(255,77,166,0.1) 60%, transparent 70%);
  border-radius: 50%;
  pointer-events: none;
  z-index: 1999;
  transform: translate(-50%, -50%);
  transition: width 0.2s ease, height 0.2s ease;
}

.cursor-heart{
  position: fixed;
  width: 24px;
  height: 24px;
  pointer-events: none;
  z-index: 3000;
  transform: translate(-50%, -50%);
  font-size: 22px;
}

.chibi-character{
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 220px; 
  z-index: 1500;
  transition: 0.3s ease;
  pointer-events: none;
  animation: chibiFloat 3s ease-in-out infinite;
}

.chibi-bounce{
  animation: bounce 0.6s ease;
}

.cursor-chibi{
  pointer-events: none;
}

@media (max-width: 600px){
  .chibi-character{
    width: 160px;
  }
}

@keyframes chibiFloat{
  0%,100%{ transform: translateX(-50%) translateY(0); }
  50%{ transform: translateX(-50%) translateY(-8px); }
}

@media(max-width:600px){
  .letter{
    max-width: 95%;
    min-height: 460px;
    padding: 40px 25px 120px;
  }
}

@keyframes bounce{
  0%{ transform: scale(1); }
  50%{ transform: scale(1.15); }
  100%{ transform: scale(1); }
}

.chibi-dialog{
  position: fixed;
  bottom: 200px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255,255,255,0.9);
  color: #ff4da6;
  padding: 10px 18px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 500;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  opacity: 0;
  transition: 0.4s ease;
  z-index: 1600;
}

.chibi-dialog.show{
  opacity: 1;
}

.sparkle{
  position:fixed;
  width:6px;
  height:6px;
  background:white;
  border-radius:50%;
  animation: sparkleFade 1s ease forwards;
}

@keyframes sparkleFade{
  0%{opacity:1; transform:scale(1);}
  100%{opacity:0; transform:scale(3);}
}


@keyframes blush{
  0%,100%{ filter:none; }
  50%{ filter: drop-shadow(0 0 8px pink); }
}

body.zoom{
  animation: slowZoom 4s ease forwards;
}

@keyframes slowZoom{
  from{ transform: scale(1); }
  to{ transform: scale(1.03); }
}

.envelope-wrapper.fade-out{
  animation: envelopeDisappear 1.2s ease forwards;
}

@keyframes envelopeDisappear{
  0%{
    opacity:1;
    transform: translateY(0) scale(1);
  }
  40%{
    transform: translateY(-10px) scale(1.05);
  }
  100%{
    opacity:0;
    transform: translateY(40px) scale(0.9);
  }
}

.chibi-final{
  animation: chibiApproach 1.8s ease forwards;
}

@keyframes chibiApproach{
  0%{
    bottom: 0;
    left: 50%;
    transform: translateX(-50%) scale(1);
  }
  100%{
    bottom: 80px;
    left: 50%;
    transform: translateX(-50%) scale(1.6);
  }
}

body.ending-zoom{
  animation: endingZoom 3s ease forwards;
}

@keyframes endingZoom{
  from{ transform: scale(1); }
  to{ transform: scale(1.05); }
}

.light-burst{
  pointer-events: none;
  z-index: -1;
}

.flash-screen{
  position:fixed;
  inset:0;
  background:white;
  opacity:0;
  pointer-events:none;
  z-index:2000;
}

.flash-screen.active{
  animation: flashEffect 0.4s ease forwards;
}

@keyframes flashEffect{
  0%{opacity:0;}
  40%{opacity:0.8;}
  100%{opacity:0;}
}

@media(max-width:600px){
  .letter{
    max-width:90%;
    padding:30px;
  }

  .text-box{
    max-width:100%;
  }
}